# 快速开始指南

## ✅ 已完成的优化

### 1. 卡片视图布局
- 每个API Key一张卡片，信息清晰分层
- 响应式设计：横屏多列、竖屏单列自适应
- 状态标识：正常（绿）、即将用尽（橙）、已用尽（红）
- 进度条可视化：动态宽度和颜色

### 2. 视图切换功能
- 📇 卡片视图（默认）：适合竖屏和快速浏览
- 📊 表格视图：适合横屏和详细对比
- 切换状态自动保存到localStorage

### 3. 保留的所有原功能
- 批量操作（复制、删除）
- 分页功能
- 自动刷新
- 密钥管理
- 缓存机制

## 🚀 如何启动

### 方法1：Deno Deploy（推荐）

1. **Fork仓库到你的GitHub**
2. **登录 [Deno Deploy](https://dash.deno.com)**
3. **创建新项目**：
   - 点击 "New Project"
   - 连接GitHub仓库
   - 选择入口文件：`main.ts`
   - 点击 "Deploy"

4. **配置密码（可选）**：
   - 进入项目设置
   - Environment Variables
   - 添加：`ADMIN_PASSWORD=你的密码`

5. **访问项目**：
   - `https://your-project.deno.dev`

### 方法2：本地运行

#### 前提条件
- 安装 Deno：https://deno.land/

#### 启动命令
```bash
cd E:\projects\droid-apikey-usage
deno run --allow-net --allow-env --allow-read --unstable main.ts
```

#### 访问地址
- 默认端口：8000
- 地址：http://localhost:8000

#### 设置密码（可选）
```bash
# Windows PowerShell
$env:ADMIN_PASSWORD="your_password"
deno run --allow-net --allow-env --allow-read --unstable main.ts

# Linux/Mac
ADMIN_PASSWORD="your_password" deno run --allow-net --allow-env --allow-read --unstable main.ts
```

## 📖 使用说明

### 首次使用

1. **访问页面**
   - 如果设置了密码，会看到登录页面
   - 输入密码登录

2. **导入API Keys**
   - 点击右上角 "⚙️ 管理密钥"
   - 在文本框中粘贴API Keys（每行一个）
   - 点击 "🚀 导入密钥"

3. **查看余额**
   - 主页自动显示所有Key的余额
   - 默认显示卡片视图

### 切换视图

点击顶部的视图切换按钮：
- 📇 卡片视图：信息卡片布局
- 📊 表格视图：传统表格布局

### 批量操作

1. **选择Keys**
   - 点击卡片/行左侧的复选框
   - 或点击表头的复选框全选

2. **执行操作**
   - 顶部会出现批量操作工具栏
   - 可以批量复制或批量删除

### 自动刷新设置

1. **打开管理面板**
   - 点击 "⚙️ 管理密钥"
   - 滚动到 "⏱️ 自动刷新设置"

2. **配置刷新间隔**
   - 输入分钟数（1-1440）
   - 点击 "💾 保存设置"

3. **暂停/启动自动刷新**
   - 点击 "⏸️ 暂停自动刷新" 或 "▶️ 启动自动刷新"

## 🎨 视图详解

### 卡片视图布局

```
┌─────────────────────────────┐
│ ☑️ Key-123  [正常]           │  ← 头部：选择框 + ID + 状态
├─────────────────────────────┤
│ fk-abc...xyz                │  ← API Key（部分显示）
├─────────────────────────────┤
│ 使用进度     45.2%           │  ← 进度标签
│ ████████░░░░░░░░░░          │  ← 进度条
├─────────────────────────────┤
│  总额度    已使用    剩余    │  ← 统计数据
│  10,000    4,520    5,480   │
├─────────────────────────────┤
│ 开始: 2024-01-01            │  ← 时间信息
│ 结束: 2024-12-31            │
├─────────────────────────────┤
│ [📋 复制Key] [🗑️ 删除]      │  ← 操作按钮
└─────────────────────────────┘
```

### 状态说明

| 状态 | 条件 | 颜色 | 图标 |
|------|------|------|------|
| 正常 | 使用率 < 80% | 🟢 绿色 | ✅ |
| 即将用尽 | 使用率 >= 80% | 🟠 橙色 | ⚠️ |
| 已用尽 | 剩余额度 = 0 | 🔴 红色 | ❌ |

## 🔧 常见问题

### Q1: 页面显示"加载失败"
**A:** 检查API Key是否有效，或网络连接是否正常

### Q2: 如何删除零额度的Keys？
**A:** 点击右下角的 "🗑️ 清除零额度" 按钮

### Q3: 卡片视图和表格视图有什么区别？
**A:** 
- **卡片视图**：信息更直观，适合竖屏和移动端
- **表格视图**：数据对比方便，适合横屏大屏幕

### Q4: 批量操作如何使用？
**A:**
1. 勾选要操作的Keys
2. 顶部出现工具栏
3. 选择批量复制或批量删除

### Q5: 如何备份我的Keys？
**A:** 
1. 全选所有Keys
2. 点击 "📋 批量复制"
3. 粘贴到文本文件保存

### Q6: 复制的Key怎么查看？
**A:** 复制后直接粘贴即可，是完整的API Key

## 📱 移动端使用

### 支持的手势
- ✅ 滑动浏览
- ✅ 点击选择
- ✅ 长按复制（浏览器原生）

### 优化特性
- 单列卡片布局
- 大号操作按钮
- Touch友好的交互

## 🔒 安全提示

1. **密码保护**
   - 强烈建议设置 `ADMIN_PASSWORD`
   - 密码会保存在Session中7天

2. **API Key存储**
   - Keys加密存储在Deno KV中
   - 页面只显示部分Key（如：fk-ab...xy）
   - 复制时才获取完整Key

3. **HTTPS部署**
   - Deno Deploy自动提供HTTPS
   - 本地开发建议使用localhost

## 📊 性能说明

### 缓存机制
- API Keys缓存在localStorage（24小时）
- 减少重复请求
- 首次加载后即时响应

### 并发控制
- 同时最多8个请求
- 避免API限流
- 保护服务器性能

### 分页优化
- 默认每页10条
- 可选30/100/全部
- 只渲染当前页数据

## 🎯 下一步

### 推荐工作流

1. **导入Keys**
   - 批量导入所有API Keys
   - 等待加载完成

2. **设置自动刷新**
   - 建议30分钟刷新一次
   - 可根据需要调整

3. **日常使用**
   - 使用卡片视图快速浏览
   - 关注 "即将用尽" 的Keys
   - 及时清理零额度Keys

4. **批量管理**
   - 定期备份Keys
   - 删除无效Keys
   - 保持列表整洁

## 📝 更新日志

### v3.1.0 (2025-11-04)
- ✨ 新增卡片视图布局
- ✨ 新增视图切换功能
- ✨ 新增状态标识和进度条
- 🎨 优化响应式设计
- 🎨 优化竖屏显示效果
- 🐛 修复已知问题

### v3.0.0
- 🔒 密码保护功能
- 🍎 FiraCode字体
- 🗑️ 删除按钮优化
- 📚 专注Deno Deploy

## 📞 支持

如有问题或建议，请提交Issue到GitHub仓库。

---

**享受使用！** 🎉
